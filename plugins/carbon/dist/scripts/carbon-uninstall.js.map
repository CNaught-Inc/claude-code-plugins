{
  "version": 3,
  "sources": ["../../src/scripts/carbon-uninstall.ts"],
  "sourcesContent": ["/**\n * Carbon Uninstall Script\n *\n * Removes carbon tracking artifacts:\n * 1. Deletes the local SQLite database (~/.claude/carbon-tracker.db)\n * 2. Removes the statusline wrapper (~/.claude/statusline-carbon.mjs)\n * 3. Removes the statusLine entry from ~/.claude/settings.json\n */\n\nimport * as fs from 'fs';\nimport * as path from 'path';\n\nfunction getClaudeDir(): string {\n    const homeDir = process.env.HOME || process.env.USERPROFILE || '';\n    return path.join(homeDir, '.claude');\n}\n\nfunction main(): void {\n    const claudeDir = getClaudeDir();\n    const dbPath = path.join(claudeDir, 'carbon-tracker.db');\n    const statuslinePath = path.join(claudeDir, 'statusline-carbon.mjs');\n    const settingsPath = path.join(claudeDir, 'settings.json');\n\n    console.log('\\n');\n    console.log('========================================');\n    console.log('  CNaught Carbon Tracker Uninstall      ');\n    console.log('========================================');\n    console.log('\\n');\n\n    // 1. Delete database\n    if (fs.existsSync(dbPath)) {\n        fs.unlinkSync(dbPath);\n        console.log(`  Deleted database: ${dbPath}`);\n    } else {\n        console.log('  Database not found (already removed)');\n    }\n\n    // Also remove WAL/SHM files if they exist\n    for (const suffix of ['-wal', '-shm']) {\n        const walPath = dbPath + suffix;\n        if (fs.existsSync(walPath)) {\n            fs.unlinkSync(walPath);\n        }\n    }\n\n    // 2. Remove statusline wrapper\n    if (fs.existsSync(statuslinePath)) {\n        fs.unlinkSync(statuslinePath);\n        console.log(`  Deleted statusline: ${statuslinePath}`);\n    }\n\n    // 3. Remove statusLine from settings.json if it points to our script\n    if (fs.existsSync(settingsPath)) {\n        try {\n            const content = fs.readFileSync(settingsPath, 'utf-8');\n            const settings = JSON.parse(content) as Record<string, unknown>;\n            const statusLine = settings.statusLine as Record<string, unknown> | undefined;\n\n            if (\n                statusLine &&\n                typeof statusLine === 'object' &&\n                typeof statusLine.command === 'string' &&\n                statusLine.command.includes('statusline-carbon')\n            ) {\n                delete settings.statusLine;\n                fs.writeFileSync(settingsPath, JSON.stringify(settings, null, 2));\n                console.log('  Removed statusLine from settings.json');\n            }\n        } catch {\n            // Non-fatal\n        }\n    }\n\n    console.log('\\n');\n    console.log('========================================');\n    console.log('\\n');\n}\n\nmain();\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;AASA,SAAoB;AACpB,WAAsB;AAEtB,SAAS,eAAuB;AAC5B,QAAM,UAAU,QAAQ,IAAI,QAAQ,QAAQ,IAAI,eAAe;AAC/D,SAAY,UAAK,SAAS,SAAS;AACvC;AAEA,SAAS,OAAa;AAClB,QAAM,YAAY,aAAa;AAC/B,QAAM,SAAc,UAAK,WAAW,mBAAmB;AACvD,QAAM,iBAAsB,UAAK,WAAW,uBAAuB;AACnE,QAAM,eAAoB,UAAK,WAAW,eAAe;AAEzD,UAAQ,IAAI,IAAI;AAChB,UAAQ,IAAI,0CAA0C;AACtD,UAAQ,IAAI,0CAA0C;AACtD,UAAQ,IAAI,0CAA0C;AACtD,UAAQ,IAAI,IAAI;AAGhB,MAAO,cAAW,MAAM,GAAG;AACvB,IAAG,cAAW,MAAM;AACpB,YAAQ,IAAI,uBAAuB,MAAM,EAAE;AAAA,EAC/C,OAAO;AACH,YAAQ,IAAI,wCAAwC;AAAA,EACxD;AAGA,aAAW,UAAU,CAAC,QAAQ,MAAM,GAAG;AACnC,UAAM,UAAU,SAAS;AACzB,QAAO,cAAW,OAAO,GAAG;AACxB,MAAG,cAAW,OAAO;AAAA,IACzB;AAAA,EACJ;AAGA,MAAO,cAAW,cAAc,GAAG;AAC/B,IAAG,cAAW,cAAc;AAC5B,YAAQ,IAAI,yBAAyB,cAAc,EAAE;AAAA,EACzD;AAGA,MAAO,cAAW,YAAY,GAAG;AAC7B,QAAI;AACA,YAAM,UAAa,gBAAa,cAAc,OAAO;AACrD,YAAM,WAAW,KAAK,MAAM,OAAO;AACnC,YAAM,aAAa,SAAS;AAE5B,UACI,cACA,OAAO,eAAe,YACtB,OAAO,WAAW,YAAY,YAC9B,WAAW,QAAQ,SAAS,mBAAmB,GACjD;AACE,eAAO,SAAS;AAChB,QAAG,iBAAc,cAAc,KAAK,UAAU,UAAU,MAAM,CAAC,CAAC;AAChE,gBAAQ,IAAI,yCAAyC;AAAA,MACzD;AAAA,IACJ,QAAQ;AAAA,IAER;AAAA,EACJ;AAEA,UAAQ,IAAI,IAAI;AAChB,UAAQ,IAAI,0CAA0C;AACtD,UAAQ,IAAI,IAAI;AACpB;AAEA,KAAK;",
  "names": []
}
